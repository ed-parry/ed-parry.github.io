{{ define "main" }}
<div class="stream">
    {{ $posts := where .Site.RegularPages "Section" "posts" }}
    {{ range $posts }}
        {{ if .Title }}
            <!-- Post with title: show title, first paragraph, and read more link -->
            <article class="post titled-post">
                <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
                <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}" data-timestamp="{{ .Date.Unix }}"></time>
                <div class="excerpt">
                    {{ .Summary }}
                </div>
                {{ if .Truncated }}
                    <a href="{{ .RelPermalink }}" class="read-more">Read more â†’</a>
                {{ end }}
            </article>
        {{ else }}
            <!-- Post without title: show inline -->
            <article class="post inline-post">
                <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}" data-timestamp="{{ .Date.Unix }}"></time>
                <div class="content">
                    {{ .Content }}
                </div>
            </article>
        {{ end }}
    {{ end }}
</div>
{{ end }}
